<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>FCB Chat</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f1f1f1;
  margin: 0;
  padding: 0;
}

/* NAVBAR */
.navbar {
  width: 100%;
  background: #333;
  padding: 12px;
  display: flex;
  gap: 20px;
  align-items: center;
}
.navbar a {
  color: white;
  text-decoration: none;
  font-size: 1rem;
}
.navbar a:hover {
  text-decoration: underline;
}

#chatBox {
  width: 100%;
  height: 75vh;
  background: white;
  overflow-y: auto;
  padding: 10px;
  border-bottom: 2px solid #ccc;
}

.message {
  padding: 6px 10px;
  margin: 4px 0;
  background: #e8f5e9;
  border-radius: 6px;
}

#inputBox {
  display: flex;
  gap: 10px;
  padding: 10px;
}

input, button {
  padding: 10px;
  font-size: 1rem;
  border-radius: 6px;
  border: 1px solid #999;
}

button {
  background: #4caf50;
  color: white;
  cursor: pointer;
}

button:hover { background: #43a047; }

</style>
</head>

<body>

<!-- â­ NAVIGATION BAR -->
<div class="navbar">
  <a href="index.html">Day 1</a>
  <a href="day2.html">Day 2</a>
  <a href="chat.html">Chat</a>
</div>

<h2 style="text-align:center;">FCB Chat</h2>

<div id="chatBox"></div>

<div id="inputBox">
  <input id="nameInput" placeholder="Name">
  <input id="msgInput" placeholder="Message..." style="flex:1;">
  <button onclick="sendMessage()">Send</button>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbyp_w0HT9pyIIJw1FsiJn3vKmCvgbhAIA4KP9SUpEzGfMESCPxSliv3XIlv-FiKJvSV/exec";

async function loadChat() {
  const res = await fetch(API + "?action=load");
  const data = await res.json();

  const box = document.getElementById("chatBox");
  box.innerHTML = "";

  data.forEach(m => {
    const div = document.createElement("div");
    div.className = "message";
    div.innerHTML = `<b>${m.name}</b>: ${m.message}`;
    box.appendChild(div);
  });

  box.scrollTop = box.scrollHeight;
}

async function sendMessage() {
  const name = document.getElementById("nameInput").value;
  const msg = document.getElementById("msgInput").value;

  if (!msg.trim()) return;

  await fetch(API + `?action=send&name=${encodeURIComponent(name)}&message=${encodeURIComponent(msg)}`);

  document.getElementById("msgInput").value = "";
  loadChat();
}

setInterval(loadChat, 2000);
loadChat();
</script>

</body>
</html>
